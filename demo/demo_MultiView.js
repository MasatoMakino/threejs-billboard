(()=>{"use strict";var e,t,i,r={1850:(e,t,i)=>{var r=i(4698),s=i(1710);s.kxk,s.eaF;class n{constructor(e){this.isLookingCameraHorizontal=!1,this.cameraPos=new s.Pq0,this.worldPos=new s.Pq0,this.needUpdateWorldPosition=!1,this.lookCamera=(e,t,i,r,s,n)=>{this.isLookingCameraHorizontal&&this.target&&(this.needUpdateWorldPosition&&(this.target.getWorldPosition(this.worldPos),this.needUpdateWorldPosition=!1),this.cameraPos.set(i.position.x,this.worldPos.y,i.position.z),this.target.lookAt(this.cameraPos))},this.target=e,this.target.getWorldPosition(this.worldPos),this.originalOnBeforeRender=this.target.onBeforeRender,this.target.onBeforeRender=this.lookCamera}dispose(){this.target&&(this.target.onBeforeRender=this.originalOnBeforeRender,this.target=void 0)}}s.gPd,new WeakMap,s.kxk,s.eaF;const a={disposeMaterials(e){Array.isArray(e)||(e=[e]);for(const t of e)t.map&&t.map.dispose(),t.dispose()},disposeStageContainer(e){e&&(e.removeFromParent(),e.removeChildren(),e.destroy({children:!0}))},disposeCanvas(e){e&&e.parentNode&&e.parentNode.removeChild(e)}};class o extends s.kxk{get isDisposed(){return this._isDisposed}get canvas(){return this._canvas}get container(){return this._container}get texture(){return this._texture}constructor(e){const{manager:t,width:i,height:n,scale:a=.1}=e;super(new s.RoJ({transparent:!0,depthTest:!0})),this._isDisposed=!1,this._manager=t,this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=n,this._container=new r.mcf,this._texture=new s.GOR(this._canvas),this._texture.colorSpace="srgb",this.material.map=this._texture,this.scale.set(a*i,a*n,1),this._manager.requestRender(this)}setScale(e){this._isDisposed?console.warn("Attempted to set scale on disposed MultiViewPixiBillboard."):(this.scale.set(e*this._canvas.width,e*this._canvas.height,1),this._manager.requestRender(this))}updateContent(){this._isDisposed?console.warn("Attempted to update disposed MultiViewPixiBillboard."):this._manager.requestRender(this)}dispose(){this._isDisposed||(this._isDisposed=!0,this.geometry.dispose(),a.disposeMaterials(this.material),a.disposeStageContainer(this._container),a.disposeCanvas(this._canvas),this.removeFromParent())}}class d extends s.eaF{get isDisposed(){return this._isDisposed}get canvas(){return this._canvas}get container(){return this._container}get texture(){return this._texture}get cameraChaser(){return this._cameraChaser}constructor(e){const{manager:t,width:i,height:a,scale:o=.1}=e;super(new s.bdM(i,a),new s.V9B({transparent:!0})),this._isDisposed=!1,this._manager=t,this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=a,this._container=new r.mcf,this._texture=new s.GOR(this._canvas),this._texture.colorSpace="srgb",this.material.map=this._texture,this._cameraChaser=new n(this),this.setScale(o),this._manager.requestRender(this)}setScale(e){this._isDisposed?console.warn("Attempted to set scale on disposed MultiViewPixiPlaneMesh."):this.scale.set(e,e,1)}updateContent(){this._isDisposed?console.warn("Attempted to update disposed MultiViewPixiPlaneMesh."):this._manager.requestRender(this)}dispose(){var e;this._isDisposed||(this._isDisposed=!0,this.geometry.dispose(),a.disposeMaterials(this.material),a.disposeStageContainer(this._container),a.disposeCanvas(this._canvas),this.removeFromParent(),null===(e=this._cameraChaser)||void 0===e||e.dispose(),this._cameraChaser=void 0)}}class h{get isDisposed(){return this._isDisposed}get renderer(){return this._renderer}constructor(e){var t;this._isDisposed=!1,this._renderer=null,this._renderQueue=new Set,this._ticker=null!==(t=null==e?void 0:e.ticker)&&void 0!==t?t:r.RvI.shared}init(){return e=this,t=void 0,s=function*(){this._renderer?console.warn("PixiMultiViewManager already initialized."):(this._renderer=yield(0,r.q5F)({width:1,height:1,autoDensity:!1,preference:"webgl",backgroundAlpha:0,antialias:!0,multiView:!0}),this._ticker.add(this._renderLoop,this),this._ticker.start())},new((i=void 0)||(i=Promise))((function(r,n){function a(e){try{d(s.next(e))}catch(e){n(e)}}function o(e){try{d(s.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}d((s=s.apply(e,t||[])).next())}));var e,t,i,s}requestRender(e){e.isDisposed||this._renderQueue.add(e)}_renderLoop(){if(0!==this._renderQueue.size&&this._renderer){for(const e of this._renderQueue)e.isDisposed&&this._renderQueue.delete(e);h.renderAllQueued(this._renderQueue,this._renderer),this._renderQueue.clear()}}static ensureRendererSize(e,t){const i=Math.max(e.width,t.width),r=Math.max(e.height,t.height);e.width===i&&e.height===r||e.resize(i,r)}static renderToTargetCanvas(e,t,i,r){var s;e&&t&&i&&(null===(s=t.getContext("2d"))||void 0===s||s.clearRect(0,0,t.width,t.height),e.render({container:r,target:t}),i.needsUpdate=!0)}static renderAllQueued(e,t){for(const i of e)i.isDisposed||(h.ensureRendererSize(t,i.canvas),h.renderToTargetCanvas(t,i.canvas,i.texture,i.container))}dispose(){this._isDisposed?console.warn("PixiMultiViewManager already disposed."):(this._isDisposed=!0,this._ticker.remove(this._renderLoop,this),this._renderer&&this._renderer.destroy(),this._renderQueue.clear())}}var c=i(6753),l=i(3580);window.onload=async()=>{const e=function(e,t){const i=new s.Z58;!function(e){const t=new s.$p8(16777215,1);e.add(t)}(i);const r=function(e,t,i){const r=new s.ubm(45,t/i,1,400);return r.position.set(0,0,100),r.updateMatrixWorld(!1),e.add(r),r}(i,e,t),n=function(e,t){const i=new c.JeP({antialias:!0});return console.log("Three.js rev :",s.sPf),i.setClearColor(new s.Q1f(0)),i.setSize(e,t),i.setPixelRatio(window.devicePixelRatio),document.body.appendChild(i.domElement),i}(e,t),a=function(e,t){const i=new l.N(e,t.domElement);return i.update(),i}(r,n);return function(e){const t=new s.IzY(30);e.add(t)}(i),function(e,t,i,r){const s=()=>{e.update(),t.render(i,r),requestAnimationFrame(s)};s()}(a,n,i,r),i}(800,600),t=new h;await t.init();for(let i=0;i<16;i++){const r=p(t,64,i+1),s=i%4*20-30,n=20*Math.floor(i/4)-30,a=0;r.position.set(s,n,a),r.cameraChaser.needUpdateWorldPosition=!0,e.add(r)}for(let i=0;i<16;i++){const r=m(t,64,i+1),s=i%4*20-30,n=20*Math.floor(i/4)-30,a=-50;r.position.set(s,n,a),e.add(r)}};const u=(e,t,i,s)=>{const n=(new r.A1g).circle(t,t,t).fill(16711680),a=new r.EYj({text:i,style:{fill:16777215}});a.position.set(10,10),e.addChild(n),e.addChild(a),setTimeout((()=>{e.removeChildren();const i=16777215*Math.random(),n=(new r.A1g).circle(t,t,t).fill(i),a=new r.EYj({text:"Updated!",style:{fill:16777215}});a.position.set(50,40),e.addChild(n),e.addChild(a),s.updateContent()}),3e3)},p=(e,t,i)=>{const r=new d({manager:e,width:2*t,height:2*t});return r.cameraChaser.isLookingCameraHorizontal=!0,u(r.container,t,"Hello MultiView!",r),r.updateContent(),r},m=(e,t,i)=>{const r=new o({manager:e,width:2*t,height:2*t});return u(r.container,t,"Billboard",r),r.updateContent(),r}}},s={};function n(e){var t=s[e];if(void 0!==t)return t.exports;var i=s[e]={exports:{}};return r[e](i,i.exports,n),i.exports}n.m=r,e=[],n.O=(t,i,r,s)=>{if(!i){var a=1/0;for(c=0;c<e.length;c++){for(var[i,r,s]=e[c],o=!0,d=0;d<i.length;d++)(!1&s||a>=s)&&Object.keys(n.O).every((e=>n.O[e](i[d])))?i.splice(d--,1):(o=!1,s<a&&(a=s));if(o){e.splice(c--,1);var h=r();void 0!==h&&(t=h)}}return t}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[i,r,s]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},i="@masatomakino/threejs-billboard:",n.l=(e,r,s,a)=>{if(t[e])t[e].push(r);else{var o,d;if(void 0!==s)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var l=h[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==i+s){o=l;break}}o||(d=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",i+s),o.src=e),t[e]=[r];var u=(i,r)=>{o.onerror=o.onload=null,clearTimeout(p);var s=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach((e=>e(r))),i)return i(r)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),d&&document.head.appendChild(o)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=183,(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={183:0};n.f.j=(t,i)=>{var r=n.o(e,t)?e[t]:void 0;if(0!==r)if(r)i.push(r[2]);else{var s=new Promise(((i,s)=>r=e[t]=[i,s]));i.push(r[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,(i=>{if(n.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var s=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,r[1](o)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,i)=>{var r,s,[a,o,d]=i,h=0;if(a.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(d)var c=d(n)}for(t&&t(i);h<a.length;h++)s=a[h],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return n.O(c)},i=self.webpackChunk_masatomakino_threejs_billboard=self.webpackChunk_masatomakino_threejs_billboard||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=n.O(void 0,[121],(()=>n(1850)));a=n.O(a)})();