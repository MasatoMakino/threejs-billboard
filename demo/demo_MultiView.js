(()=>{"use strict";var e,t,i,s={4895:(e,t,i)=>{var s=i(4698),r=i(1710);r.kxk,r.eaF;class n{constructor(e){this.isLookingCameraHorizontal=!1,this.cameraPos=new r.Pq0,this.worldPos=new r.Pq0,this.needUpdateWorldPosition=!1,this.lookCamera=(e,t,i,s,r,n)=>{this.isLookingCameraHorizontal&&this.target&&(this.needUpdateWorldPosition&&(this.target.getWorldPosition(this.worldPos),this.needUpdateWorldPosition=!1),this.cameraPos.set(i.position.x,this.worldPos.y,i.position.z),this.target.lookAt(this.cameraPos))},this.target=e,this.target.getWorldPosition(this.worldPos),this.originalOnBeforeRender=this.target.onBeforeRender,this.target.onBeforeRender=this.lookCamera}dispose(){this.target&&(this.target.onBeforeRender=this.originalOnBeforeRender,this.target=void 0)}}r.gPd,new WeakMap,r.kxk,r.eaF;class a{static disposeMaterials(e){Array.isArray(e)||(e=[e]);for(const t of e)t.map&&t.map.dispose(),t.dispose()}static disposeStageContainer(e){e&&(e.removeFromParent(),e.removeChildren(),e.destroy({children:!0}))}static disposeCanvas(e){e&&e.parentNode&&e.parentNode.removeChild(e)}}class o extends r.kxk{get isDisposed(){return this._isDisposed}get canvas(){return this._canvas}get container(){return this._container}get texture(){return this._texture}constructor(e){const{manager:t,width:i,height:n,scale:a=.1}=e;super(new r.RoJ({transparent:!0,depthTest:!0})),this._isDisposed=!1,this._manager=t,this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=n,this._container=new s.mcf,this._texture=new r.GOR(this._canvas),this._texture.colorSpace="srgb",this.material.map=this._texture,this.scale.set(a*i,a*n,1),this._manager.requestRender(this)}setScale(e){this._isDisposed?console.warn("Attempted to set scale on disposed MultiViewPixiBillboard."):(this.scale.set(e*this._canvas.width,e*this._canvas.height,1),this._manager.requestRender(this))}updateContent(){this._isDisposed?console.warn("Attempted to update disposed MultiViewPixiBillboard."):this._manager.requestRender(this)}dispose(){this._isDisposed||(this._isDisposed=!0,this.geometry.dispose(),a.disposeMaterials(this.material),a.disposeStageContainer(this._container),a.disposeCanvas(this._canvas),this.removeFromParent())}}class d extends r.eaF{get isDisposed(){return this._isDisposed}get canvas(){return this._canvas}get container(){return this._container}get texture(){return this._texture}get cameraChaser(){return this._cameraChaser}constructor(e){const{manager:t,width:i,height:a,scale:o=.1}=e;super(new r.bdM(i,a),new r.V9B({transparent:!0})),this._isDisposed=!1,this._manager=t,this._canvas=document.createElement("canvas"),this._canvas.width=i,this._canvas.height=a,this._container=new s.mcf,this._texture=new r.GOR(this._canvas),this._texture.colorSpace="srgb",this.material.map=this._texture,this._cameraChaser=new n(this),this.setScale(o),this._manager.requestRender(this)}setScale(e){this._isDisposed?console.warn("Attempted to set scale on disposed MultiViewPixiPlaneMesh."):this.scale.set(e,e,1)}updateContent(){this._isDisposed?console.warn("Attempted to update disposed MultiViewPixiPlaneMesh."):this._manager.requestRender(this)}dispose(){var e;this._isDisposed||(this._isDisposed=!0,this.geometry.dispose(),a.disposeMaterials(this.material),a.disposeStageContainer(this._container),a.disposeCanvas(this._canvas),this.removeFromParent(),null===(e=this._cameraChaser)||void 0===e||e.dispose(),this._cameraChaser=void 0)}}class h{get isDisposed(){return this._isDisposed}get renderer(){return this._renderer}constructor(e){var t;this._isDisposed=!1,this._renderer=null,this._renderQueue=new Set,this._ticker=null!==(t=null==e?void 0:e.ticker)&&void 0!==t?t:s.RvI.shared}init(){return e=this,t=void 0,r=function*(){this._renderer?console.warn("PixiMultiViewManager already initialized."):(this._renderer=yield(0,s.q5F)({width:1,height:1,autoDensity:!1,preference:"webgl",backgroundAlpha:0,antialias:!0,multiView:!0}),this._ticker.add(this._renderLoop,this),this._ticker.start())},new((i=void 0)||(i=Promise))((function(s,n){function a(e){try{d(r.next(e))}catch(e){n(e)}}function o(e){try{d(r.throw(e))}catch(e){n(e)}}function d(e){var t;e.done?s(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,o)}d((r=r.apply(e,t||[])).next())}));var e,t,i,r}requestRender(e){e.isDisposed||this._renderQueue.add(e)}_renderLoop(){if(0!==this._renderQueue.size&&this._renderer){for(const e of this._renderQueue)e.isDisposed&&this._renderQueue.delete(e);h.renderAllQueued(this._renderQueue,this._renderer),this._renderQueue.clear()}}static ensureRendererSize(e,t){const i=Math.max(e.width,t.width),s=Math.max(e.height,t.height);e.width===i&&e.height===s||e.resize(i,s)}static renderToTargetCanvas(e,t,i,s){var r;e&&t&&i&&(null===(r=t.getContext("2d"))||void 0===r||r.clearRect(0,0,t.width,t.height),e.render({container:s,target:t}),i.needsUpdate=!0)}static renderAllQueued(e,t){for(const i of e)i.isDisposed||(h.ensureRendererSize(t,i.canvas),h.renderToTargetCanvas(t,i.canvas,i.texture,i.container))}dispose(){this._isDisposed?console.warn("PixiMultiViewManager already disposed."):(this._isDisposed=!0,this._ticker.remove(this._renderLoop,this),this._renderer&&this._renderer.destroy(),this._renderQueue.clear())}}var c=i(6753),l=i(3580);window.onload=async()=>{const e=function(e,t){const i=new r.Z58;!function(e){const t=new r.$p8(16777215,1);e.add(t)}(i);const s=function(e,t,i){const s=new r.ubm(45,t/i,1,400);return s.position.set(0,0,100),s.updateMatrixWorld(!1),e.add(s),s}(i,e,t),n=function(e,t){const i=new c.JeP({antialias:!0});return console.log("Three.js rev :",r.sPf),i.setClearColor(new r.Q1f(0)),i.setSize(e,t),i.setPixelRatio(window.devicePixelRatio),document.body.appendChild(i.domElement),i}(e,t),a=function(e,t){const i=new l.N(e,t.domElement);return i.update(),i}(s,n);return function(e){const t=new r.IzY(30);e.add(t)}(i),function(e,t,i,s){const r=()=>{e.update(),t.render(i,s),requestAnimationFrame(r)};r()}(a,n,i,s),i}(800,600),t=new h;await t.init();for(let i=0;i<16;i++){const s=p(t,64,i+1),r=i%4*20-30,n=20*Math.floor(i/4)-30,a=0;s.position.set(r,n,a),s.cameraChaser.needUpdateWorldPosition=!0,e.add(s)}for(let i=0;i<16;i++){const s=m(t,64,i+1),r=i%4*20-30,n=20*Math.floor(i/4)-30,a=-50;s.position.set(r,n,a),e.add(s)}};const u=(e,t,i,r)=>{const n=(new s.A1g).circle(t,t,t).fill(16711680),a=new s.EYj({text:i,style:{fill:16777215}});a.position.set(10,10),e.addChild(n),e.addChild(a),setTimeout((()=>{e.removeChildren();const i=16777215*Math.random(),n=(new s.A1g).circle(t,t,t).fill(i),a=new s.EYj({text:"Updated!",style:{fill:16777215}});a.position.set(50,40),e.addChild(n),e.addChild(a),r.updateContent()}),3e3)},p=(e,t,i)=>{const s=new d({manager:e,width:2*t,height:2*t});return s.cameraChaser.isLookingCameraHorizontal=!0,u(s.container,t,"Hello MultiView!",s),s.updateContent(),s},m=(e,t,i)=>{const s=new o({manager:e,width:2*t,height:2*t});return u(s.container,t,"Billboard",s),s.updateContent(),s}}},r={};function n(e){var t=r[e];if(void 0!==t)return t.exports;var i=r[e]={exports:{}};return s[e](i,i.exports,n),i.exports}n.m=s,e=[],n.O=(t,i,s,r)=>{if(!i){var a=1/0;for(c=0;c<e.length;c++){for(var[i,s,r]=e[c],o=!0,d=0;d<i.length;d++)(!1&r||a>=r)&&Object.keys(n.O).every((e=>n.O[e](i[d])))?i.splice(d--,1):(o=!1,r<a&&(a=r));if(o){e.splice(c--,1);var h=s();void 0!==h&&(t=h)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[i,s,r]},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce(((t,i)=>(n.f[i](e,t),t)),[])),n.u=e=>e+".js",n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),t={},i="@masatomakino/threejs-billboard:",n.l=(e,s,r,a)=>{if(t[e])t[e].push(s);else{var o,d;if(void 0!==r)for(var h=document.getElementsByTagName("script"),c=0;c<h.length;c++){var l=h[c];if(l.getAttribute("src")==e||l.getAttribute("data-webpack")==i+r){o=l;break}}o||(d=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",i+r),o.src=e),t[e]=[s];var u=(i,s)=>{o.onerror=o.onload=null,clearTimeout(p);var r=t[e];if(delete t[e],o.parentNode&&o.parentNode.removeChild(o),r&&r.forEach((e=>e(s))),i)return i(s)},p=setTimeout(u.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=u.bind(null,o.onerror),o.onload=u.bind(null,o.onload),d&&document.head.appendChild(o)}},n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.j=183,(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&"SCRIPT"===t.currentScript.tagName.toUpperCase()&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var s=i.length-1;s>-1&&(!e||!/^http(s?):/.test(e));)e=i[s--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),(()=>{var e={183:0};n.f.j=(t,i)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)i.push(s[2]);else{var r=new Promise(((i,r)=>s=e[t]=[i,r]));i.push(s[2]=r);var a=n.p+n.u(t),o=new Error;n.l(a,(i=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var r=i&&("load"===i.type?"missing":i.type),a=i&&i.target&&i.target.src;o.message="Loading chunk "+t+" failed.\n("+r+": "+a+")",o.name="ChunkLoadError",o.type=r,o.request=a,s[1](o)}}),"chunk-"+t,t)}},n.O.j=t=>0===e[t];var t=(t,i)=>{var s,r,[a,o,d]=i,h=0;if(a.some((t=>0!==e[t]))){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(d)var c=d(n)}for(t&&t(i);h<a.length;h++)r=a[h],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},i=self.webpackChunk_masatomakino_threejs_billboard=self.webpackChunk_masatomakino_threejs_billboard||[];i.forEach(t.bind(null,0)),i.push=t.bind(null,i.push.bind(i))})();var a=n.O(void 0,[121],(()=>n(4895)));a=n.O(a)})();