# Git GitHub コマンドに関するルール

このドキュメントは、本プロジェクトにおけるGitおよびGitHubコマンドの使用に関するルールを定めます。これらのルールに従うことで、プロジェクトの履歴管理、ブランチ運用、GitHub上でのコミュニケーションを円滑に行うことを目指します。

## ブランチ戦略

本プロジェクトでは、GitHub Flowを採用します。詳細は [https://docs.github.com/ja/get-started/using-github/github-flow](https://docs.github.com/ja/get-started/using-github/github-flow) を参照してください。

GitHub Flowは、軽量でシンプルなブランチベースのワークフローです。主な流れは以下の通りです。

1.  新しい作業を開始する際は、`main` ブランチから新しいフィーチャーブランチを作成します。
2.  変更を加え、頻繁にコミットし、定期的にリモートブランチにプッシュします。
3.  フィードバックを得たり、議論を開始したりするために、プルリクエストを作成します。
4.  レビューコメントに対応し、必要に応じて追加の変更をコミットします。
5.  プルリクエストが承認されたら、`main` ブランチにマージしてデプロイします。

## ブランチ名の構成

ブランチ名は以下の要素を組み合わせた構成とします。
`タイプ/Issue番号（任意）-目的`

- **タイプ**: 変更の種類に基づき、以下のいずれかを使用します。
  - `feature/`: 新機能追加
  - `fix/`: バグ修正
  - `test/`: テスト関連
  - `maintain/`: メンテナンス
  - `perf/`: パフォーマンス改善
  - `docs/`: ドキュメント更新
- **Issue番号**: 関連するIssueが存在する場合のみ、`issue-番号` の形式で含めます。関連するIssueが存在しない場合は含めません。変更の重要度や影響範囲にかかわらず、Issueの存在有無のみで判断します。
- **目的**: ヒアリングで抽出した課題の解決方法を短く要約します（ケバブケース）。「改善」「明確化」などの抽象的な表現を避け、具体的な動詞を使用してください。
  - 例: `add-xxx`, `update-xxx`, `extend-xxx`, `optimize-xxx`, `refactor-xxx`, `restructure-xxx`, `add-xxx-description`, `update-xxx-definition`, `split-xxx`, `separate-xxx`, `standardize-xxx`
- **ブランチ名の例**:
  - 良い例: `feature/issue-123-add-user-profile`
  - 良い例: `fix/issue-456-resolve-login-bug`
  - 良い例: `test/add-unit-tests-for-utils`
  - 良い例: `maintain/update-dependencies`
  - 良い例: `perf/optimize-rendering`
  - 良い例: `docs/update-readme`

## メインブランチへの直接操作の禁止

- メインブランチ (`main`) への直接コミットは禁止します。
- メインブランチ (`main`) への直接プッシュは、GitHubのブランチプロテクションルールにより拒否されます。

## 特殊ブランチ `gh-pages`

- `gh-pages` ブランチは、ビルドされたAPIドキュメントとデモページをGitHub Pagesにデプロイするために使用されます。
- このブランチのコンテンツはGitHub Actions上でビルドされ、そのままコミット、デプロイされます。
- **ユーザーおよびエージェントは、このブランチを直接操作（コミット、プッシュ、チェックアウトなど）することを禁止します。**

## テストの実行

- ローカル環境にもテスト環境が整備されています。
- `pre-push` フックによってテストが自動的にトリガーされます。
- テストをパスしないとプッシュできません。
- GitHub側のCIでもテストが実行され、テストに合格しない限りメインブランチ (`main`) にマージすることはできません。

## Git履歴確認時のノーページャーオプション

- `git log` などの履歴確認コマンドを実行する際は、必ず `--no-pager` オプションを使用してください。
- 例: `git log --no-pager`
- 理由: ページャーによる出力のページ送りを無効にし、エージェントの操作が中断されるのを防ぐためです。

## GHコマンド `pr create` 本文のルール

- `gh pr create` コマンドなどで本文を指定する際に、改行コード（`\n` など）をエスケープせず、そのまま記述してください。
- 理由: ghコマンドは本文引数に含まれるエスケープされた改行文字をデコードせず、そのまま本文に含めます。そのため、`\n` のような文字列が本文中に表示され、プルリクエストの本文が崩れてしまうためです。
